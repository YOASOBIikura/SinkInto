---
title: vite8
date: 2024-11-11 16:49:57
categories:
  - vite
tags:
  - vite跨域
---

跨域(仅发生在浏览器): 当A源浏览器的网页 向 B源的服务器地址(不满足同源策略)请求对应的信息，就会产生跨域，跨域请求默认情况下会被浏览器拦截，除非对应的请求服务器出具标记表明A源是可以在B源拿东西的

注意: 跨域限制是服务器已经相应了东西，但是浏览器想不给你

vite配置
```
server:{ // 表示开发服务器的配置
    proxy:{ // 配置跨域解决方案
        “/api”: { // 以后再遇到/api开头的请求时都将其代理到target属性对应的域中去
            target: "",
            changeOrigin: true,
            rewrite: (path) => path.replace(/^\/api/, '')
        }
    }
}
```

## 原理 经典代理

开发时态
- 首先如果我们自己的前端发请求，对不同的源去请求数据一定会因为跨域被浏览器逮到
- 那我们可以通过自己本地的开发服务器代为发送请求，而此时已经是服务器与服务器间通信绕过了浏览器进行请求了
- 本地服务器拿到对应的结果之后会直接把结果给到浏览器，而浏览器一看本地的开发服务器和页面请求是符合同源策略的就直接放行，这样就解决了跨域问题

生产时态
- 一般交给后端来处理跨域问题:
    - ngnix: 代理服务(和开发失态原理一样)
    - 配置身份标记
    - 将打包好的dist目录交给后端或者运维，让后端服务和前端代码保持在同一个域下面